<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Unit Converter</title>
    <link rel="stylesheet" href="toggle.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            background: var(--bg-color);
            color: var(--text-primary);
            line-height: 1.6;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
            padding: 40px 20px;
        }

        .header {
            text-align: center;
            margin-bottom: 40px;
            position: relative;
        }

        .header h1 {
            font-size: 2rem;
            font-weight: 300;
            color: var(--text-primary);
            margin-bottom: 8px;
        }

        .header p {
            color: var(--text-secondary);
            font-size: 14px;
        }

        .theme-toggle {
            position: absolute;
            top: 0;
            right: 0;
        }

        .category-selector {
            background: var(--card-bg);
            border: 1px solid var(--border-color);
            border-radius: 4px;
            margin-bottom: 30px;
            overflow: hidden;
        }

        .category-header {
            padding: 12px 16px;
            background: var(--code-bg);
            border-bottom: 1px solid var(--border-color);
            font-weight: 500;
            color: var(--text-primary);
            font-size: 14px;
        }

        .category-tabs {
            display: flex;
            flex-wrap: wrap;
            padding: 16px;
            gap: 8px;
        }

        .category-tab {
            padding: 8px 16px;
            border: 1px solid var(--border-color);
            background: var(--card-bg);
            border-radius: 4px;
            cursor: pointer;
            font-size: 13px;
            color: var(--text-primary);
            transition: all 0.2s;
        }

        .category-tab:hover {
            background: var(--hover-bg);
            border-color: var(--text-secondary);
        }

        .category-tab.active {
            background: var(--text-primary);
            color: var(--card-bg);
            border-color: var(--text-primary);
        }

        .converter-section {
            background: var(--card-bg);
            border: 1px solid var(--border-color);
            border-radius: 4px;
            margin-bottom: 30px;
            overflow: hidden;
        }

        .converter-content {
            padding: 24px;
        }

        .conversion-row {
            display: grid;
            grid-template-columns: 1fr auto 1fr;
            gap: 16px;
            align-items: end;
            margin-bottom: 20px;
        }

        .input-group {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .input-label {
            font-size: 13px;
            font-weight: 500;
            color: var(--text-primary);
        }

        .unit-input {
            padding: 12px;
            border: 1px solid var(--border-color);
            border-radius: 4px;
            font-size: 16px;
            text-align: center;
            outline: none;
            background: var(--input-bg);
            color: var(--text-primary);
        }

        .unit-input:focus {
            border-color: var(--text-primary);
            background: var(--input-focus-bg);
        }

        .unit-input::placeholder {
            color: var(--text-secondary);
        }

        .unit-select {
            padding: 8px 12px;
            border: 1px solid var(--border-color);
            border-radius: 4px;
            font-size: 13px;
            background: var(--input-bg);
            color: var(--text-primary);
            outline: none;
        }

        .unit-select:focus {
            border-color: var(--text-primary);
            background: var(--input-focus-bg);
        }

        .swap-button {
            padding: 12px;
            border: 1px solid var(--border-color);
            background: var(--card-bg);
            border-radius: 4px;
            cursor: pointer;
            font-size: 18px;
            color: var(--text-primary);
            transition: all 0.2s;
            display: flex;
            align-items: center;
            justify-content: center;
            min-height: 48px;
        }

        .swap-button:hover {
            background: var(--hover-bg);
            border-color: var(--text-secondary);
        }

        .conversion-formula {
            background: var(--code-bg);
            padding: 16px;
            border-radius: 4px;
            border-left: 3px solid var(--text-primary);
            font-family: 'Monaco', 'Menlo', 'Courier New', monospace;
            font-size: 13px;
            color: var(--text-secondary);
            margin-top: 16px;
        }

        .common-conversions {
            background: var(--card-bg);
            border: 1px solid var(--border-color);
            border-radius: 4px;
            overflow: hidden;
        }

        .common-header {
            padding: 12px 16px;
            background: var(--code-bg);
            border-bottom: 1px solid var(--border-color);
            font-weight: 500;
            color: var(--text-primary);
            font-size: 14px;
        }

        .common-list {
            padding: 16px;
        }

        .common-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 8px 0;
            border-bottom: 1px solid var(--border-color);
            font-size: 13px;
        }

        .common-item:last-child {
            border-bottom: none;
        }

        .common-left {
            color: var(--text-primary);
        }

        .common-right {
            color: var(--text-secondary);
            font-family: 'Monaco', 'Menlo', 'Courier New', monospace;
        }

        .error {
            background: var(--error-bg);
            color: var(--error-color);
            padding: 12px;
            border-radius: 4px;
            border-left: 3px solid var(--error-border);
            font-size: 13px;
            margin-top: 16px;
        }

        .hidden {
            display: none;
        }

        @media (max-width: 768px) {
            .container {
                padding: 20px 16px;
            }
            
            .header h1 {
                font-size: 1.5rem;
                padding-right: 50px;
            }

            .theme-toggle {
                top: -10px;
                right: 0;
            }

            .conversion-row {
                grid-template-columns: 1fr;
                gap: 12px;
            }

            .swap-button {
                order: -1;
                width: 60px;
                margin: 0 auto;
                min-height: 40px;
            }

            .category-tabs {
                justify-content: center;
            }

            .category-tab {
                flex: 1;
                text-align: center;
                min-width: 80px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <button class="theme-toggle" onclick="toggleTheme()" aria-label="Toggle theme">
                <i data-lucide="sun" class="theme-icon" id="theme-icon"></i>
            </button>
            <h1>Unit Converter</h1>
            <p>Convert between different units of measurement</p>
        </div>

        <div class="category-selector">
            <div class="category-header">Measurement Categories</div>
            <div class="category-tabs">
                <button class="category-tab active" data-category="length">Length</button>
                <button class="category-tab" data-category="weight">Weight</button>
                <button class="category-tab" data-category="temperature">Temperature</button>
                <button class="category-tab" data-category="area">Area</button>
                <button class="category-tab" data-category="volume">Volume</button>
                <button class="category-tab" data-category="speed">Speed</button>
                <button class="category-tab" data-category="time">Time</button>
                <button class="category-tab" data-category="energy">Energy</button>
            </div>
        </div>

        <div class="converter-section">
            <div class="converter-content">
                <div class="conversion-row">
                    <div class="input-group">
                        <label class="input-label">From</label>
                        <input 
                            type="number" 
                            id="fromInput" 
                            class="unit-input" 
                            placeholder="Enter value"
                            oninput="convertUnits()"
                        >
                        <select id="fromUnit" class="unit-select" onchange="convertUnits()">
                            <!-- Options will be populated by JavaScript -->
                        </select>
                    </div>
                    
                    <button class="swap-button" onclick="swapUnits()" title="Swap units">
                        ⇄
                    </button>
                    
                    <div class="input-group">
                        <label class="input-label">To</label>
                        <input 
                            type="number" 
                            id="toInput" 
                            class="unit-input" 
                            placeholder="Result"
                            readonly
                        >
                        <select id="toUnit" class="unit-select" onchange="convertUnits()">
                            <!-- Options will be populated by JavaScript -->
                        </select>
                    </div>
                </div>

                <div id="conversionFormula" class="conversion-formula hidden">
                    <!-- Formula will be shown here -->
                </div>

                <div id="errorMessage" class="error hidden">
                    <!-- Error messages will be shown here -->
                </div>
            </div>
        </div>

        <div class="common-conversions">
            <div class="common-header">Common Conversions</div>
            <div class="common-list" id="commonList">
                <!-- Common conversions will be populated by JavaScript -->
            </div>
        </div>
    </div>

    <script src="toggle.js"></script>
    <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.js"></script>
    <script>
        // Unit definitions and conversion factors
        const unitCategories = {
            length: {
                name: 'Length',
                baseUnit: 'meter',
                units: {
                    millimeter: { factor: 0.001, symbol: 'mm', name: 'Millimeter' },
                    centimeter: { factor: 0.01, symbol: 'cm', name: 'Centimeter' },
                    meter: { factor: 1, symbol: 'm', name: 'Meter' },
                    kilometer: { factor: 1000, symbol: 'km', name: 'Kilometer' },
                    inch: { factor: 0.0254, symbol: 'in', name: 'Inch' },
                    foot: { factor: 0.3048, symbol: 'ft', name: 'Foot' },
                    yard: { factor: 0.9144, symbol: 'yd', name: 'Yard' },
                    mile: { factor: 1609.34, symbol: 'mi', name: 'Mile' }
                },
                common: [
                    ['1 meter', '100 centimeters'],
                    ['1 kilometer', '1000 meters'],
                    ['1 foot', '12 inches'],
                    ['1 yard', '3 feet'],
                    ['1 mile', '5280 feet']
                ]
            },
            weight: {
                name: 'Weight',
                baseUnit: 'kilogram',
                units: {
                    milligram: { factor: 0.000001, symbol: 'mg', name: 'Milligram' },
                    gram: { factor: 0.001, symbol: 'g', name: 'Gram' },
                    kilogram: { factor: 1, symbol: 'kg', name: 'Kilogram' },
                    ton: { factor: 1000, symbol: 't', name: 'Metric Ton' },
                    ounce: { factor: 0.0283495, symbol: 'oz', name: 'Ounce' },
                    pound: { factor: 0.453592, symbol: 'lb', name: 'Pound' },
                    stone: { factor: 6.35029, symbol: 'st', name: 'Stone' }
                },
                common: [
                    ['1 kilogram', '1000 grams'],
                    ['1 pound', '16 ounces'],
                    ['1 stone', '14 pounds'],
                    ['1 ton', '1000 kilograms']
                ]
            },
            temperature: {
                name: 'Temperature',
                baseUnit: 'celsius',
                units: {
                    celsius: { symbol: '°C', name: 'Celsius' },
                    fahrenheit: { symbol: '°F', name: 'Fahrenheit' },
                    kelvin: { symbol: 'K', name: 'Kelvin' }
                },
                common: [
                    ['0°C', '32°F (Freezing)'],
                    ['100°C', '212°F (Boiling)'],
                    ['37°C', '98.6°F (Body temp)'],
                    ['20°C', '68°F (Room temp)']
                ]
            },
            area: {
                name: 'Area',
                baseUnit: 'square_meter',
                units: {
                    square_millimeter: { factor: 0.000001, symbol: 'mm²', name: 'Square Millimeter' },
                    square_centimeter: { factor: 0.0001, symbol: 'cm²', name: 'Square Centimeter' },
                    square_meter: { factor: 1, symbol: 'm²', name: 'Square Meter' },
                    square_kilometer: { factor: 1000000, symbol: 'km²', name: 'Square Kilometer' },
                    square_inch: { factor: 0.00064516, symbol: 'in²', name: 'Square Inch' },
                    square_foot: { factor: 0.092903, symbol: 'ft²', name: 'Square Foot' },
                    acre: { factor: 4046.86, symbol: 'ac', name: 'Acre' },
                    hectare: { factor: 10000, symbol: 'ha', name: 'Hectare' }
                },
                common: [
                    ['1 m²', '10000 cm²'],
                    ['1 km²', '100 hectares'],
                    ['1 acre', '4047 m²'],
                    ['1 ft²', '144 in²']
                ]
            },
            volume: {
                name: 'Volume',
                baseUnit: 'liter',
                units: {
                    milliliter: { factor: 0.001, symbol: 'ml', name: 'Milliliter' },
                    liter: { factor: 1, symbol: 'L', name: 'Liter' },
                    cubic_meter: { factor: 1000, symbol: 'm³', name: 'Cubic Meter' },
                    fluid_ounce: { factor: 0.0295735, symbol: 'fl oz', name: 'Fluid Ounce' },
                    cup: { factor: 0.236588, symbol: 'cup', name: 'Cup' },
                    pint: { factor: 0.473176, symbol: 'pt', name: 'Pint' },
                    quart: { factor: 0.946353, symbol: 'qt', name: 'Quart' },
                    gallon: { factor: 3.78541, symbol: 'gal', name: 'Gallon' }
                },
                common: [
                    ['1 liter', '1000 milliliters'],
                    ['1 gallon', '4 quarts'],
                    ['1 quart', '2 pints'],
                    ['1 cup', '8 fluid ounces']
                ]
            },
            speed: {
                name: 'Speed',
                baseUnit: 'meter_per_second',
                units: {
                    meter_per_second: { factor: 1, symbol: 'm/s', name: 'Meter per Second' },
                    kilometer_per_hour: { factor: 0.277778, symbol: 'km/h', name: 'Kilometer per Hour' },
                    mile_per_hour: { factor: 0.44704, symbol: 'mph', name: 'Mile per Hour' },
                    foot_per_second: { factor: 0.3048, symbol: 'ft/s', name: 'Foot per Second' },
                    knot: { factor: 0.514444, symbol: 'kn', name: 'Knot' }
                },
                common: [
                    ['1 m/s', '3.6 km/h'],
                    ['1 mph', '1.609 km/h'],
                    ['1 knot', '1.852 km/h'],
                    ['100 km/h', '62.1 mph']
                ]
            },
            time: {
                name: 'Time',
                baseUnit: 'second',
                units: {
                    millisecond: { factor: 0.001, symbol: 'ms', name: 'Millisecond' },
                    second: { factor: 1, symbol: 's', name: 'Second' },
                    minute: { factor: 60, symbol: 'min', name: 'Minute' },
                    hour: { factor: 3600, symbol: 'h', name: 'Hour' },
                    day: { factor: 86400, symbol: 'd', name: 'Day' },
                    week: { factor: 604800, symbol: 'wk', name: 'Week' },
                    month: { factor: 2629746, symbol: 'mo', name: 'Month (avg)' },
                    year: { factor: 31556952, symbol: 'yr', name: 'Year (avg)' }
                },
                common: [
                    ['1 minute', '60 seconds'],
                    ['1 hour', '60 minutes'],
                    ['1 day', '24 hours'],
                    ['1 week', '7 days'],
                    ['1 year', '365.25 days']
                ]
            },
            energy: {
                name: 'Energy',
                baseUnit: 'joule',
                units: {
                    joule: { factor: 1, symbol: 'J', name: 'Joule' },
                    kilojoule: { factor: 1000, symbol: 'kJ', name: 'Kilojoule' },
                    calorie: { factor: 4.184, symbol: 'cal', name: 'Calorie' },
                    kilocalorie: { factor: 4184, symbol: 'kcal', name: 'Kilocalorie' },
                    watt_hour: { factor: 3600, symbol: 'Wh', name: 'Watt Hour' },
                    kilowatt_hour: { factor: 3600000, symbol: 'kWh', name: 'Kilowatt Hour' },
                    btu: { factor: 1055.06, symbol: 'BTU', name: 'British Thermal Unit' }
                },
                common: [
                    ['1 kJ', '1000 J'],
                    ['1 kcal', '4.184 kJ'],
                    ['1 kWh', '3.6 MJ'],
                    ['1 BTU', '1.055 kJ']
                ]
            }
        };

        let currentCategory = 'length';

        // Initialize the converter
        function initConverter() {
            setupCategoryTabs();
            loadCategory(currentCategory);
            updateCommonConversions();
        }

        // Setup category tab event listeners
        function setupCategoryTabs() {
            document.querySelectorAll('.category-tab').forEach(tab => {
                tab.addEventListener('click', () => {
                    const category = tab.getAttribute('data-category');
                    switchCategory(category);
                });
            });
        }

        // Switch to a different category
        function switchCategory(category) {
            // Update active tab
            document.querySelectorAll('.category-tab').forEach(tab => {
                tab.classList.toggle('active', tab.getAttribute('data-category') === category);
            });

            currentCategory = category;
            loadCategory(category);
            updateCommonConversions();
            clearInputs();
        }

        // Load units for a specific category
        function loadCategory(category) {
            const categoryData = unitCategories[category];
            const fromSelect = document.getElementById('fromUnit');
            const toSelect = document.getElementById('toUnit');

            // Clear existing options
            fromSelect.innerHTML = '';
            toSelect.innerHTML = '';

            // Add unit options
            Object.keys(categoryData.units).forEach(unitKey => {
                const unit = categoryData.units[unitKey];
                const option1 = new Option(`${unit.name} (${unit.symbol})`, unitKey);
                const option2 = new Option(`${unit.name} (${unit.symbol})`, unitKey);
                
                fromSelect.add(option1);
                toSelect.add(option2);
            });

            // Set default selections
            const unitKeys = Object.keys(categoryData.units);
            if (unitKeys.length >= 2) {
                fromSelect.value = unitKeys[0];
                toSelect.value = unitKeys[1];
            }
        }

        // Update common conversions display
        function updateCommonConversions() {
            const categoryData = unitCategories[currentCategory];
            const commonList = document.getElementById('commonList');
            
            commonList.innerHTML = '';
            
            categoryData.common.forEach(([left, right]) => {
                const item = document.createElement('div');
                item.className = 'common-item';
                item.innerHTML = `
                    <span class="common-left">${left}</span>
                    <span class="common-right">${right}</span>
                `;
                commonList.appendChild(item);
            });
        }

        // Convert temperature (special case)
        function convertTemperature(value, fromUnit, toUnit) {
            // Convert to Celsius first
            let celsius;
            switch (fromUnit) {
                case 'celsius':
                    celsius = value;
                    break;
                case 'fahrenheit':
                    celsius = (value - 32) * 5/9;
                    break;
                case 'kelvin':
                    celsius = value - 273.15;
                    break;
            }

            // Convert from Celsius to target unit
            switch (toUnit) {
                case 'celsius':
                    return celsius;
                case 'fahrenheit':
                    return celsius * 9/5 + 32;
                case 'kelvin':
                    return celsius + 273.15;
            }
        }

        // Convert units
        function convertUnits() {
            const fromInput = document.getElementById('fromInput');
            const toInput = document.getElementById('toInput');
            const fromUnit = document.getElementById('fromUnit').value;
            const toUnit = document.getElementById('toUnit').value;
            const formulaDiv = document.getElementById('conversionFormula');
            const errorDiv = document.getElementById('errorMessage');

            // Clear previous messages
            formulaDiv.classList.add('hidden');
            errorDiv.classList.add('hidden');

            const inputValue = parseFloat(fromInput.value);
            
            if (isNaN(inputValue) || fromInput.value === '') {
                toInput.value = '';
                return;
            }

            try {
                let result;
                let formula = '';

                if (currentCategory === 'temperature') {
                    result = convertTemperature(inputValue, fromUnit, toUnit);
                    formula = getTemperatureFormula(inputValue, fromUnit, toUnit);
                } else {
                    const categoryData = unitCategories[currentCategory];
                    const fromFactor = categoryData.units[fromUnit].factor;
                    const toFactor = categoryData.units[toUnit].factor;
                    
                    result = (inputValue * fromFactor) / toFactor;
                    
                    const fromSymbol = categoryData.units[fromUnit].symbol;
                    const toSymbol = categoryData.units[toUnit].symbol;
                    formula = `${inputValue} ${fromSymbol} × ${fromFactor/toFactor} = ${result.toFixed(6)} ${toSymbol}`;
                }

                toInput.value = formatResult(result);
                
                // Show formula
                formulaDiv.textContent = formula;
                formulaDiv.classList.remove('hidden');

            } catch (error) {
                errorDiv.textContent = 'Conversion error: ' + error.message;
                errorDiv.classList.remove('hidden');
                toInput.value = '';
            }
        }

        // Get temperature conversion formula
        function getTemperatureFormula(value, fromUnit, toUnit) {
            const conversion = `${fromUnit} → ${toUnit}`;
            
            switch (conversion) {
                case 'celsius → fahrenheit':
                    return `${value}°C × 9/5 + 32 = ${(value * 9/5 + 32).toFixed(2)}°F`;
                case 'fahrenheit → celsius':
                    return `(${value}°F - 32) × 5/9 = ${((value - 32) * 5/9).toFixed(2)}°C`;
                case 'celsius → kelvin':
                    return `${value}°C + 273.15 = ${(value + 273.15).toFixed(2)}K`;
                case 'kelvin → celsius':
                    return `${value}K - 273.15 = ${(value - 273.15).toFixed(2)}°C`;
                case 'fahrenheit → kelvin':
                    const celsius = (value - 32) * 5/9;
                    return `(${value}°F - 32) × 5/9 + 273.15 = ${(celsius + 273.15).toFixed(2)}K`;
                case 'kelvin → fahrenheit':
                    const fahrenheit = (value - 273.15) * 9/5 + 32;
                    return `(${value}K - 273.15) × 9/5 + 32 = ${fahrenheit.toFixed(2)}°F`;
                default:
                    return `${value} ${fromUnit} = ${value} ${toUnit}`;
            }
        }

        // Format result for display
        function formatResult(value) {
            if (Math.abs(value) >= 1e6 || (Math.abs(value) < 0.001 && value !== 0)) {
                return value.toExponential(6);
            } else if (Math.abs(value) >= 100) {
                return value.toFixed(2);
            } else {
                return value.toFixed(6).replace(/\.?0+$/, '');
            }
        }

        // Swap units
        function swapUnits() {
            const fromSelect = document.getElementById('fromUnit');
            const toSelect = document.getElementById('toUnit');
            const fromInput = document.getElementById('fromInput');
            const toInput = document.getElementById('toInput');

            // Swap selections
            const tempValue = fromSelect.value;
            fromSelect.value = toSelect.value;
            toSelect.value = tempValue;

            // Swap input values
            const tempInputValue = fromInput.value;
            fromInput.value = toInput.value;
            toInput.value = '';

            // Reconvert
            if (fromInput.value) {
                convertUnits();
            }
        }

        // Clear inputs
        function clearInputs() {
            document.getElementById('fromInput').value = '';
            document.getElementById('toInput').value = '';
            document.getElementById('conversionFormula').classList.add('hidden');
            document.getElementById('errorMessage').classList.add('hidden');
        }

        // Initialize when page loads
        window.addEventListener('load', () => {
            initConverter();
            lucide.createIcons();
        });
    </script>
</body>
</html>